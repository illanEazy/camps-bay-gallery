<!-- ==========================================================================
   ARTWORK CARD COMPONENT - REUSABLE FOR ALL ARTWORK DISPLAYS
   FIXED: Images now display correctly, entire card is clickable
   ========================================================================== -->

   <div class="artwork-card" data-artwork="{{ artwork.id }}">
    <!-- Clickable image area that links to artwork detail -->
    <a href="{% url 'artwork_detail' artwork.id %}" class="artwork-image-link">
        <div class="artwork-image">
            <img src="{{ artwork.image }}" alt="{{ artwork.title }}" loading="lazy">
            
            <!-- Year Badge or Sold Badge -->
            {% if artwork.sold %}
                <div class="artwork-year sold-badge">
                    <i class="fas fa-tag"></i> SOLD
                </div>
            {% elif artwork.year %}
                <div class="artwork-year text-small text-white">
                    {{ artwork.year }}
                </div>
            {% endif %}
            
            <!-- Overlay for sold items -->
            {% if artwork.sold %}
                <div class="sold-overlay">
                    <div class="sold-text">
                        <i class="fas fa-check-circle"></i>
                        <span>SOLD</span>
                    </div>
                </div>
            {% endif %}
        </div>
    </a>
    
    <div class="artwork-info">
        <!-- Artist Name -->
        <div class="artwork-artist text-xsmall text-gray text-uppercase">
            {% if artwork.artist_id %}
                <a href="{% url 'artist_detail' artist_id=artwork.artist_id %}" class="artist-link">
                    {{ artwork.artist }}
                </a>
            {% else %}
                {{ artwork.artist }}
            {% endif %}
        </div>
        
        <!-- Artwork Title - Clickable -->
        <div class="artwork-title h5 mt-xs {% if artwork.sold %}sold-strike{% endif %}">
            <a href="{% url 'artwork_detail' artwork.id %}" class="artwork-title-link">
                {{ artwork.title }}
            </a>
        </div>
        
        <!-- AVAILABILITY MODE -->
        <div class="artwork-availability text-xsmall mt-xs mb-sm">
            {% if artwork.sold %}
                <span class="availability-tag sold-tag">SOLD</span>
            {% elif artwork.availability == 'at_gallery' %}
                <span class="availability-tag at-gallery">Available at Gallery</span>
            {% elif artwork.availability == 'on_request' %}
                <span class="availability-tag on-request">Available on Request</span>
            {% else %}
                <span class="availability-tag available">Available</span>
            {% endif %}
        </div>
        
        <!-- Medium - Optional -->
        {% if artwork.medium %}
            <div class="artwork-medium text-small text-gray mb-sm">{{ artwork.medium }}</div>
        {% endif %}
        
        <!-- Single Action Button - DYNAMIC based on availability -->
        <div class="artwork-actions mt-md">
            {% if artwork.sold %}
                <!-- SOLD OUT button - still links to detail page but with disabled purchase -->
                <a href="{% url 'artwork_detail' artwork.id %}" class="view-btn btn btn-secondary">
                    <i class="fas fa-info-circle"></i> VIEW DETAILS
                </a>
            {% elif artwork.availability == 'on_request' or not artwork.allow_purchase %}
                <!-- INQUIRE button for "on request" items -->
                <a href="{% url 'artwork_detail' artwork.id %}" class="view-btn btn btn-secondary">
                    INQUIRE NOW
                </a>
            {% else %}
                <!-- BUY NOW button for "available" or "at gallery" items -->
                <a href="{% url 'artwork_detail' artwork.id %}" class="view-btn btn btn-primary">
                    BUY NOW
                </a>
            {% endif %}
        </div>
    </div>
</div>

<style>
    /* Make image area clickable */
    .artwork-image-link {
        display: block;
        text-decoration: none;
        color: inherit;
    }
    
    .artwork-image-link:hover .artwork-image img {
        transform: scale(1.06);
    }
    
    /* Make title link inherit card styles */
    .artwork-title-link {
        color: inherit;
        text-decoration: none;
        transition: color var(--transition-fast);
    }
    
    .artwork-title-link:hover {
        color: var(--color-secondary);
    }
    
    /* Sold overlay for artwork images */
    .sold-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(231, 76, 60, 0.85);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 2;
        opacity: 0;
        transition: opacity var(--transition-fast);
    }
    
    .artwork-card:hover .sold-overlay {
        opacity: 1;
    }
    
    .sold-text {
        color: white;
        font-size: 1.5rem;
        font-weight: var(--font-weight-bold);
        text-transform: uppercase;
        letter-spacing: 2px;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 10px;
    }
    
    .sold-text i {
        font-size: 3rem;
    }
    
    .sold-badge {
        background: #e74c3c;
        color: white;
        border: none;
        z-index: 3; /* Above overlay */
    }
    
    .sold-tag {
        background: #e74c3c;
        color: white;
        border: none;
        font-weight: var(--font-weight-bold);
    }
    
    .btn-disabled {
        background: #95a5a6;
        color: white;
        border: none;
        cursor: not-allowed;
        opacity: 0.7;
    }
    
    .btn-disabled:hover {
        background: #95a5a6;
        transform: none;
        cursor: not-allowed;
    }
</style>
<!-- Note: This maintains EXACTLY the same visual style as before -->
<!-- Now images display correctly and entire card area is clickable -->
<!-- Note: This maintains EXACTLY the same visual style as before -->
<!-- Only removes the redundant Schedule Viewing button -->

<!-- Note: This maintains EXACTLY the same visual style as before -->
<!-- Only adds availability tags and changes button text/logic -->

<!-- Note: This component requires the following artwork object properties:
     - id, image, title, artist, artist_id, year
     - availability: 'at_gallery', 'available', 'on_request'
     - sold: boolean
     - show_price: boolean
     - price: decimal (optional)
     - discounted_price: decimal (optional)
     - medium: string (optional)
     - allow_purchase: boolean
     - allow_inquiry: boolean
     - allow_schedule_viewing: boolean
-->