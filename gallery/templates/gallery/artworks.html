<!-- FILE: templates/gallery/artworks.html -->
{% extends 'gallery/base.html' %}

{% block title %}Artworks | Camps Bay Art Gallery{% endblock %}

{% block content %}
    <!-- Artworks Hero Section -->
    <section class="artworks-hero">
        <div class="container">
            <h1 class="h1 mb-sm">Artworks Collection</h1>
            <p class="text-large text-dark">Discover our curated selection of contemporary artworks from talented artists around the world.</p>
            <div class="artworks-count mt-md">
                <span class="text-small text-gray">Showing {{ total_artworks }} artworks</span>
            </div>
        </div>
    </section>

    <!-- Filter & Sort Bar -->
    <section class="artwork-filters-section section">
        <div class="container">
            <form method="get" action="{% url 'artworks' %}" class="artwork-filters-form" id="artworkFilterForm">
                <div class="filter-grid grid-2">
                    <!-- Artist Filter -->
                    <div class="filter-group">
                        <label for="artistFilter" class="text-small text-uppercase text-gray mb-xs">Filter by Artist</label>
                        <select id="artistFilter" name="artist" class="form-select">
                            <option value="all" {% if current_artist == 'all' %}selected{% endif %}>All Artists</option>
                            {% for artist in artists %}
                                <option value="{{ artist }}" {% if current_artist == artist %}selected{% endif %}>
                                    {{ artist }}
                                </option>
                            {% endfor %}
                        </select>
                    </div>
                    
                    <!-- Sort Options -->
                    <div class="filter-group">
                        <label for="sortBy" class="text-small text-uppercase text-gray mb-xs">Sort By</label>
                        <select id="sortBy" name="sort" class="form-select">
                            <option value="newest" {% if current_sort == 'newest' %}selected{% endif %}>Newest First</option>
                            <option value="oldest" {% if current_sort == 'oldest' %}selected{% endif %}>Oldest First</option>
                            <option value="title_asc" {% if current_sort == 'title_asc' %}selected{% endif %}>Title (A-Z)</option>
                            <option value="title_desc" {% if current_sort == 'title_desc' %}selected{% endif %}>Title (Z-A)</option>
                        </select>
                    </div>
                </div>
            </form>
        </div>
    </section>

    <!-- Artworks Grid - NOW USING REUSABLE GRID COMPONENT -->
    <section class="artwork-section section-light">
        <div class="container">
            <!-- Reuse the artwork grid component -->
            {% include 'gallery/includes/_artwork_grid.html' %}
        </div>
    </section>
</section>
{% endblock %}

{% block extra_js %}
<script>
    // Initialize artworks page filtering
    document.addEventListener('DOMContentLoaded', function() {
        const filterForm = document.getElementById('artworkFilterForm');
        const artistSelect = document.getElementById('artistFilter');
        const sortSelect = document.getElementById('sortBy');
        
        if (filterForm) {
            // Auto-submit form when filters change
            artistSelect.addEventListener('change', function() {
                filterForm.submit();
            });
            
            sortSelect.addEventListener('change', function() {
                filterForm.submit();
            });
        }
    });
</script>
{% endblock %}